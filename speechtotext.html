<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Meeting Scribe Pro</title>
    <style>
        body { font-family: 'Inter', system-ui, sans-serif; background: #0f172a; color: #f8fafc; margin: 0; padding: 20px; display: flex; justify-content: center; }
        .app-container { width: 100%; max-width: 1000px; background: #1e293b; border-radius: 20px; padding: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); }
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #334155; padding-bottom: 15px; margin-bottom: 20px; }
        #transcript-box { background: #020617; border-radius: 12px; padding: 25px; height: 500px; overflow-y: auto; font-size: 1.15rem; line-height: 1.8; border: 1px solid #334155; }
        .note-entry { margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dotted #334155; animation: fadeIn 0.3s ease; }
        .timestamp { font-family: monospace; color: #6366f1; font-weight: bold; font-size: 0.85rem; margin-right: 12px; background: #1e293b; padding: 2px 8px; border-radius: 4px; }
        .interim { color: #94a3b8; font-style: italic; }
        .controls { display: flex; gap: 10px; margin-top: 20px; }
        button { padding: 12px 25px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .start { background: #10b981; color: white; }
        .stop { background: #ef4444; color: white; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header">

<h2 style="margin:0;">Meeting notes pro </h2> <h2><a href="index.html" style="color: white; float: right;">Meeting notes v1 </a>
</h2>

        <div id="recording-status" style="color: #94a3b8;">● Standby</div>
		
    </div>

    <div id="transcript-box">abhi</div>

    <div class="controls">
        <button class="start" id="startBtn">Start Session</button>
        <button class="stop" id="stopBtn" disabled>Stop</button>
        <button style="background: #334155; color: white;" onclick="clearTranscript()">Clear</button>
    </div>
	 <div>
	<footer style="text-align: center; padding:1px; background-color: #334155; margin-top: 1px;">
    <p>Developed by Abhishek</p>
</footer>
</div>
</div>

<script>
    const transcriptBox = document.getElementById('transcript-box');
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const status = document.getElementById('recording-status');

    let isRunning = false;
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    const recognition = new SpeechRecognition();

    recognition.continuous = true;
    recognition.interimResults = true;
    recognition.lang = 'en-US';

    // Speed Optimization: Reducing the "thinking" time of the browser
    // Note: Some browsers don't support maxAlternatives, but it helps if they do.
    recognition.maxAlternatives = 1;

    recognition.onresult = (event) => {
        let interimTranscript = '';
        
        for (let i = event.resultIndex; i < event.results.length; ++i) {
            const result = event.results[i];
            const text = result[0].transcript;
            
            if (result.isFinal) {
                appendFinalEntry(text);
            } else {
                interimTranscript += text;
            }
        }
        updateInterimDisplay(interimTranscript);
    };

    function appendFinalEntry(text) {
        // 1. Auto-Punctuation (Capitalization & Period)
        let formattedText = text.trim();
        formattedText = formattedText.charAt(0).toUpperCase() + formattedText.slice(1);
        
        // Add full stop if not present
        if (!/[.!?]$/.test(formattedText)) formattedText += '.';

        // 2. Get Timestamp
        const now = new Date();
        const timeStr = now.getHours().toString().padStart(2, '0') + ":" + 
                        now.getMinutes().toString().padStart(2, '0') + ":" + 
                        now.getSeconds().toString().padStart(2, '0');

        // 3. Create Element
        const div = document.createElement('div');
        div.className = 'note-entry';
        div.innerHTML = `<span class="timestamp">[${timeStr}]</span><span class="text">${formattedText}</span>`;
        
        // Remove old interim and add final
        const interimSpan = document.getElementById('interim-span');
        if (interimSpan) interimSpan.remove();
        
        transcriptBox.appendChild(div);
        transcriptBox.scrollTop = transcriptBox.scrollHeight;
    }

    function updateInterimDisplay(text) {
        let interimSpan = document.getElementById('interim-span');
        if (!interimSpan) {
            interimSpan = document.createElement('span');
            interimSpan.id = 'interim-span';
            interimSpan.className = 'interim';
            transcriptBox.appendChild(interimSpan);
        }
        interimSpan.innerText = text;
        transcriptBox.scrollTop = transcriptBox.scrollHeight;
    }

    recognition.onend = () => { if (isRunning) recognition.start(); };

    startBtn.onclick = () => {
        isRunning = true;
        recognition.start();
        startBtn.disabled = true;
        stopBtn.disabled = false;
        status.innerText = "● Recording Live";
        status.style.color = "#ef4444";
    };

    stopBtn.onclick = () => {
        isRunning = false;
        recognition.stop();
        startBtn.disabled = false;
        stopBtn.disabled = true;
        status.innerText = "● Standby";
        status.style.color = "#94a3b8";
    };

    function clearTranscript() { transcriptBox.innerHTML = ''; }
</script>

</body>

</html>
